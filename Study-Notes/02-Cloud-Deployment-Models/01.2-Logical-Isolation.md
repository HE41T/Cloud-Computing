# Logical Isolation (Data & Security Perspective)

## Logical Isolation คืออะไร
Logical Isolation คือแนวคิดด้านความปลอดภัยในการแยก  
**ทรัพยากร ระบบ และข้อมูล**  
ออกจากกันด้วยวิธีทางซอฟต์แวร์และนโยบาย (Logical)  
แม้จะใช้งานอยู่บนโครงสร้างพื้นฐานเดียวกัน (Physical)

> อยู่เครื่องเดียวกันได้  
> แต่ไม่สามารถมองเห็นหรือเข้าถึงกันได้

---

## ทำไม Logical Isolation ถึงสำคัญ
Logical Isolation คือหัวใจของ
- Public Cloud
- Multi-Tenant System
- SaaS / PaaS
- Cloud Security

ถ้าไม่มี Logical Isolation
- ข้อมูลจะปะปนกัน
- เกิด Data Breach ได้ง่าย
- ไม่สามารถให้หลายองค์กรใช้ระบบเดียวกันได้

---

## เปรียบเทียบให้เข้าใจง่าย

### ตัวอย่าง: คอนโด
- อาคารเดียวกัน = Physical Infrastructure
- แต่ละห้องล็อกกุญแจ = Logical Isolation
- ผู้อยู่อาศัยคนอื่นเข้าห้องเราไม่ได้

---

## Logical Isolation แยกอะไรบ้าง

### 1. Data Isolation (การแยกข้อมูล)
- แยก Database
- แยก Schema / Table
- แยก Storage Bucket / Volume
- แยก Encryption Key ต่อ Tenant

**ตัวอย่าง**
- ลูกค้า A ไม่สามารถอ่านข้อมูลลูกค้า B ได้
- แต่ใช้ Database Server เดียวกัน

---

### 2. Compute Isolation (การแยกการประมวลผล)
- Virtual Machine (VM)
- Container (Namespace, cgroup)
- Resource Limit (CPU / RAM)

**เป้าหมาย**
- Process หนึ่งไม่กระทบอีก Process
- ไม่แย่ง Resource กันเกินสิทธิ์

---

### 3. Network Isolation (การแยกเครือข่าย)
- VPC / VNet
- Subnet
- VLAN
- Security Group / Firewall Rule

**ตัวอย่าง**
- Server คนละ Environment (Dev / Prod) สื่อสารกันไม่ได้
- DB เปิดเฉพาะ IP ของ App Server

---

### 4. Access Isolation (การแยกสิทธิ์)
- IAM (Identity and Access Management)
- RBAC (Role-Based Access Control)
- Policy-based Access

**ตัวอย่าง**
- Admin เข้าระบบได้
- User เห็นเฉพาะข้อมูลของตัวเอง

---

## Logical Isolation ในเชิงเทคนิค

| Layer | กลไกที่ใช้ |
|------|------------|
| Hardware | CPU Ring / IOMMU |
| Hypervisor | VM Isolation |
| OS | Process / User Isolation |
| Container | Namespace / cgroup |
| Network | VPC / Firewall |
| Identity | IAM / RBAC |
| Storage | ACL / Policy |

---

## Logical Isolation vs Physical Isolation

| ประเด็น | Logical Isolation | Physical Isolation |
|--------|------------------|-------------------|
| ใช้เครื่องร่วมกัน | ✅ | ❌ |
| แยกด้วย Software | ✅ | ❌ |
| แยกด้วย Hardware | ❌ | ✅ |
| ความยืดหยุ่น | สูง | ต่ำ |
| ต้นทุน | ต่ำ | สูง |
| ใช้ใน Public Cloud | มาก | น้อย |

---

## Logical Isolation ในระบบ Cloud

### ตัวอย่างใน AWS
- Account Isolation
- VPC
- Security Group
- IAM Role
- S3 Bucket Policy

---

### ตัวอย่างใน Kubernetes
- Namespace
- NetworkPolicy
- RBAC
- Pod Security Context

---

## Logical Isolation กับ Data Sensitivity

| ระดับข้อมูล | การใช้ Logical Isolation |
|-------------|-------------------------|
| Public Data | Isolation พื้นฐาน |
| Internal Data | IAM + Network |
| Confidential Data | Encryption + Strict Policy |
| Sensitive Data | อาจต้องใช้ Physical Isolation เพิ่ม |

---

## ความเสี่ยงของ Logical Isolation
Logical Isolation **ปลอดภัยได้เท่ากับการตั้งค่า**

ความเสี่ยงที่พบบ่อย
- Misconfiguration
- Over-permission
- Shared Resource ที่ไม่ได้จำกัดสิทธิ์
- ไม่มี Monitoring / Audit

---

## Best Practice ในองค์กร
1. Principle of Least Privilege
2. Default Deny
3. แยก Environment (Dev / UAT / Prod)
4. Logging และ Audit
5. Review Policy เป็นระยะ
6. ใช้ Defense in Depth (หลายชั้น)

---

## โครงสร้างพื้นฐานของ Computer / Server ที่รองรับ Logical Isolation

Logical Isolation ไม่ได้เกิดขึ้นลอย ๆ  
แต่ทำงานอยู่บน **โครงสร้างพื้นฐานของ Server** ที่ถูกออกแบบมาเพื่อรองรับ
การแยกระบบ แยกข้อมูล และแยกผู้ใช้งานอย่างปลอดภัย

---

## องค์ประกอบของ Server Infrastructure (Physical Layer)

### 1. CPU (Central Processing Unit)
- หน่วยประมวลผลหลักของ Server
- รองรับ Virtualization (Intel VT-x / AMD-V)
- แบ่ง Core / Thread ให้หลาย VM หรือ Container ใช้งานได้

**สิ่งที่เราได้**
- แยกการประมวลผลของแต่ละ Tenant
- Process หนึ่งไม่เข้าถึง Memory ของอีก Process
- กำหนด CPU Limit ได้

---

### 2. RAM (Memory)
- หน่วยความจำสำหรับระบบและแอป
- ใช้ Memory Mapping และ Protection

**สิ่งที่เราได้**
- แยกพื้นที่หน่วยความจำ
- ป้องกัน Memory Leak ข้ามระบบ
- ตั้ง Reservation / Limit ได้

---

### 3. Storage (Disk / Storage System)
- HDD / SSD / NVMe
- SAN / NAS
- Distributed Storage

**สิ่งที่เราได้**
- แยก Volume / Bucket
- แยก File System
- Encryption แยก Key ต่อ Tenant
- Snapshot / Backup แยกตามระบบ

---

### 4. Network Interface (NIC)
- Physical NIC
- VLAN / VXLAN
- Virtual Switch

**สิ่งที่เราได้**
- แยก Network Traffic
- ป้องกันการดักฟัง
- สร้าง Private Network บนเครื่องเดียวกัน

---

### 5. Power & Cooling
- Redundant Power
- UPS
- Cooling System

**สิ่งที่เราได้**
- ความเสถียร
- ลด Downtime
- รองรับ Workload ระยะยาว

---

## องค์ประกอบเชิงซอฟต์แวร์บน Server

### 6. Hypervisor
- VMware ESXi, KVM, Hyper-V

**สิ่งที่เราได้**
- VM Isolation
- แยก OS ต่อ VM
- จำกัด Resource

---

### 7. Operating System
- Linux / Windows Server

**สิ่งที่เราได้**
- User Isolation
- Process Isolation
- Permission Control

---

### 8. Container Runtime
- Docker
- containerd
- CRI-O

**สิ่งที่เราได้**
- Namespace Isolation
- cgroup Resource Control
- Lightweight Isolation

---

### 9. Virtual Network & Security
- Firewall
- Security Group
- Network Policy

**สิ่งที่เราได้**
- จำกัดการเข้าถึง
- ป้องกัน Lateral Movement
- Zero Trust Network

---

### 10. Identity & Access System
- IAM
- RBAC
- Policy Engine

**สิ่งที่เราได้**
- ควบคุมว่าใครทำอะไรได้
- แยกบทบาทผู้ใช้
- Audit และ Trace การเข้าถึง

---

## ความสัมพันธ์ Infrastructure กับ Logical Isolation

| Infrastructure | Logical Isolation |
|----------------|------------------|
| CPU / RAM | Process & VM Isolation |
| Storage | Data Isolation |
| Network | Network Isolation |
| Hypervisor | VM Boundary |
| OS | User / Process Boundary |
| IAM | Access Isolation |

---

## สรุปภาพรวม

Logical Isolation คือผลลัพธ์ของ
- Hardware ที่รองรับ Virtualization
- Software ที่ออกแบบมาเพื่อแยกการใช้งาน
- Policy และ Security Control ที่ถูกต้อง

> ใช้เครื่องเดียวกันได้  
> แต่ข้อมูล ระบบ และผู้ใช้  
> ถูกแยกออกจากกันอย่างปลอดภัย
